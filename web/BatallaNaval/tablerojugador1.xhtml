<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Tablero Jugador1</title>
        <link type="text/css" href="../css/style.css" rel="stylesheet"/>
        <script type="text/javascript" src="../javascript/batalla.js"></script>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <style type="text/css">
            .ui-diagram-element {
                width:5em; 
                height:5em;
                line-height:5em;
                text-align: center;
                box-shadow: 0 5px 10px rgba(0, 0, 0, 0.9);
                border-radius: 5em;
                border: 1px solid #404a4e;
                background-color: #404a4e;
                color: #cccccc;
            }

            .ui-diagram-element:hover {
                background-color: red;
            }
        </style>
    </h:head>
    <h:body class="fondo" >
        <p:panel id="miTablaPosicion" header="Tablero de Posiciones -- Jugador 1" class="fondo">
            <c:set var = "cantidad" scope = "session" value = "#{controladorBatalla.mostrarTablero()}"/>
            <c:if test = "${cantidad == 1}">
                <c:forEach var = "i" begin = "1" end = "10">
                    <table border="7" style="background-color: #BBADA0; margin: 0 auto; text-align:center; border-radius: 20%;">
                        <tr>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                        </tr>
                    </table>
                </c:forEach>
            </c:if>

            <c:if test = "${cantidad == 2}">
                <c:forEach var = "i" begin = "1" end = "20">
                    <table border="7" style="background-color: #BBADA0; margin: 0 auto; text-align:center; border-radius: 20%;">
                        <tr style="color: white">
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>

                        </tr>
                    </table>
                </c:forEach>
            </c:if>

            <c:if test = "${cantidad == 3}">
                <c:forEach var = "i" begin = "1" end = "30">
                    <table border="7" style="background-color: #BBADA0; margin: 0 auto; text-align:center; border-radius: 20%;">
                        <tr>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                        </tr>
                    </table>
                </c:forEach>
            </c:if>
            <p:panel header="Coordendas En JUEGO" id="pnlCuadricula" class="fondo">
                <input id="coordsInput" value="#{controladorBatalla.tablerojug1.datosCoor()}" disabled=" true"/>  
                <input id="posDeBar" value="#{controladorBatalla.prueba}" disabled=" true"/>  
                <button onclick="lanzadera()"> Prueba</button>
            </p:panel>
        </p:panel>

        <p:panel id="miTablaDisparos" header="Tablero de Disparos -- Jugador 1" class="fondo">
            <c:set var = "cantidad" scope = "session" value = "#{controladorBatalla.mostrarTablero()}"/>
            <c:if test = "${cantidad == 1}">
                <c:forEach var = "i" begin = "1" end = "10">
                    <table border="7" style="background-color: #BBADA0; margin: 0 auto; text-align:center; border-radius: 20%;">
                        <tr>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                        </tr>
                    </table>
                </c:forEach>
            </c:if>
            <p:panel header="Disparos En JUEGO" id="pnlDis" class="fondo">
                <input id="coordsDis" value="#{controladorBatalla.disparoJugadorUno()}" disabled=" true"/>
            </p:panel>
        </p:panel>
        <p:panel id="miTablaJugadorDos" header="Tablero de Posiciones -- Jugador 2" class="fondo">
            <c:set var = "cantidad" scope = "session" value = "#{controladorBatalla.mostrarTablero()}"/>
            <c:if test = "${cantidad == 1}">
                <c:forEach var = "i" begin = "1" end = "10">
                    <table border="7" style="background-color: #BBADA0; margin: 0 auto; text-align:center; border-radius: 20%;">
                        <tr>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                            <td style="background-color: aqua; color: black; border-radius: 30%;">AGUA</td>
                        </tr>
                    </table>
                </c:forEach>
            </c:if>   
        </p:panel>

        <h:form id="frmBatalla">

            <p:growl id="pnlErroresLogin"/>

            <p:panel id="pnlPrincipal" class="fondo">

                <h1 onmouseover="style.color = 'red'" onmouseout="style.color = 'white'" style="background: black">BIENVENIDO JUGADOR-1!!!</h1>

                <!--<p:panelGrid columns="2" class="fondo">
                    <p:panel class="fondo">
                        <h3>INFORMACION DE JUEGO!!</h3>
                        <p:inputTextarea rows="10" cols="33" value="#{controladorBatalla.adicionarCoordenadas}"/>
                        <p:commandButton value="Verificar" update="pnlPrincipal" action="#{controladorBatalla.indicarPosiciones()}"/>
                    </p:panel>

                    <p:panel class="fondo">
                        <h3>INFORMACION DE JUEGO!!</h3>
                        <p:inputTextarea rows="10" cols="33" value="#{controladorBatalla.informeDeTodosLosbarcos}"/>
                        <p:commandButton value="Verificar" update="pnlPrincipal" action="#{controladorBatalla.informeDeBarcos()}"/>
                    </p:panel>
                </p:panelGrid>-->

                <p:panel id="pnlDiagram" header="Arbol N ---> Barcos Disponible" class="fondo">
                    <p:diagram id="diagrama" value="#{controladorBatalla.model2}" style="height:600px" styleClass="ui-widget-content" class="fondo"/>
                </p:panel>

                <p:remoteCommand name="elementClickRight" 
                                 actionListener="#{controladorBatalla.onClickRight()}"
                                 >
                </p:remoteCommand>
                <script>
                    $(document).ready(function () {
                        $('.ui-diagram > .ui-diagram-element').mousedown(function (info) {
                            if (info.which === 3) {
                                elementClickRight([{
                                        name: 'elementId',
                                        value: info.target.id
                                    }]);
                            }
                        });
                    });
                </script>

                <p:contextMenu for="pnlDiagram" id="pnCmVeh" 
                               targetFilter=".ui-diagram-element" >
                    <p:menuitem value="Colocar posición"
                                ajax="false"
                                icon="ui-icon-gear"
                                onclick="PF('pnlColocarCoordenadas').show();
                                        return false;"/>
                </p:contextMenu>

                <p:dialog id="pnlColocarCoordenadas"
                          widgetVar="pnlColocarCoordenadas"
                          header="Agregar las posiciones">

                    <p:panelGrid columns="3">

                        <p:panelGrid columns="2">
                            <p:outputLabel value="Columnas"/>
                            <p:spinner min="1" max="30" value="#{controladorBatalla.columna}"/>
                            <p:outputLabel value="Filas"/>
                            <p:spinner min="1" max="30" value="#{controladorBatalla.fila}" />
                            <p:outputLabel value="pos"/>
                            <p:spinner min="0" max="30" value="#{controladorBatalla.prueba}" />
                        </p:panelGrid>

                        <p:selectOneMenu id="pnlSelecciPos" required="true" value="#{controladorBatalla.posicionDeBarco}" style="width: 150px">
                            <f:selectItem itemValue="0" itemLabel="Indique Posición..." itemEscaped="true"/>
                            <f:selectItem itemValue="1" itemLabel="Vertical"/>
                            <f:selectItem itemValue="2" itemLabel="Horizontal" />
                            <p:ajax update="pnlSelecciPos,pnlErroresLogin" event="change"/>
                        </p:selectOneMenu>
                        <p:commandButton process="@parent"
                                         update="pnlCuadricula,pnlPrincipal,pnlErroresLogin"
                                         value="COO[]"
                                         actionListener="#{controladorBatalla.addCoordenadas()}"
                                         oncomplete="PF('pnlColocarCoordenadas').show();"/>
                    </p:panelGrid>

                    <p:panelGrid columns="2">
                        <p:outputLabel value="Disparo Columnas"/>
                        <p:spinner min="1" max="30" value="#{controladorBatalla.disparoColumna}"/>
                        <p:outputLabel value="Disparo Filas"/>
                        <p:spinner min="1" max="30" value="#{controladorBatalla.disparoFila}"/>
                    </p:panelGrid>

                    <p:commandButton process="@parent"
                                     update="pnlCuadricula,pnlPrincipal,pnlErroresLogin"
                                     value="Indicar Pos"
                                     actionListener="#{controladorBatalla.indicarPosiciones()}"
                                     oncomplete="PF('pnlColocarCoordenadas').show();"/>
                    <p:commandButton process="@parent"
                                     update="pnlCuadricula,pnlPrincipal,pnlErroresLogin"
                                     value="Adicionar Pos"
                                     onclick="tenerCoordeanadas()"
                                     oncomplete="PF('pnlColocarCoordenadas').hide();"/>
                    <p:commandButton process="@parent"
                                     update="pnlDis,pnlErroresLogin"
                                     value="Indicar Disparo"
                                     actionListener="#{controladorBatalla.disparar()}"
                                     oncomplete="PF('pnlColocarCoordenadas').show();"/>
                    <p:commandButton process="@parent"
                                     update="pnlDis,pnlErroresLogin"
                                     value="Adicionar Disparo"
                                     onclick="adicionarDisparos()"
                                     oncomplete="PF('pnlColocarCoordenadas').hide();"/>
                </p:dialog>


                <p:panel header="Datos de Barco " class="fondo" id="pnlDatosDeBar">
                    <p:commandButton value="Datos" action="#{controladorBatalla.barcosEnSistema()}"
                                     update="pnlDatosDeBar"/> 
                    <p:dataTable value="#{controladorBatalla.informacionDeBarcos}"
                                 var="barcos" class="fondo">
                        <p:column class="fondo" style="background-color: red; color: white">
                            <f:facet name="header">
                                <p:outputLabel value="Nombre"/>
                            </f:facet>
                            <p:outputLabel value="#{barcos.nombre}" style="color: red"/>
                        </p:column>
                        <p:column class="fondo" style="background-color: green; color: white">
                            <f:facet name="header">
                                <p:outputLabel value="Cantidad de Barcos"/>
                            </f:facet>
                            <p:outputLabel value="#{barcos.cantidadJuego}" style="color: green"/>
                        </p:column>
                        <p:column class="fondo" style="background-color: blue; color: white">
                            <f:facet name="header">
                                <p:outputLabel value="# de casillas"/>
                            </f:facet>
                            <p:outputLabel value="#{barcos.nroCasillas}" style="color: blue"/>
                        </p:column>
                    </p:dataTable>
                </p:panel>

            </p:panel>
        </h:form>
    </h:body>
</html>

